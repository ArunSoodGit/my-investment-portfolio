syntax = "proto3";

option java_multiple_files = true;
option java_package = "com.example.market.grpc";
option java_outer_classname = "PortfolioProto";

package market;

// ====== REQUESTS ======

message PortfolioRequest {
  int64 portfolioId = 1; // Identyfikator portfela
}

// ====== MODELE ======


// Pojedynczy składnik portfela
message PortfolioItem {
  string symbol = 1;          // np. "AAPL"
  string name = 2;            // np. "Apple Inc."
  string exchange = 3;        // np. "NASDAQ"
  double quantity = 4;        // liczba jednostek / akcji aktualnie w portfelu
  string averagePurchasePrice = 5;   // cena ostatniego zakupu
  string percentageChange = 6;   // zmiana ceny w procentach
  string currentPrice = 7;    // aktualna cena rynkowa
  string currency = 8;        // np. "USD"
  string totalValue = 9;      // obliczona wartość (quantity * currentPrice)
  string profit = 10;          // zysk/strata (totalValue - purchasePrice * quantity)
  string profitPercentage = 11;          // zysk/strata %
}

// ====== RESPONSES ======

message PortfolioResponse {
  int64 portfolioId = 1;
  string userId = 2;
  string portfolioName = 3;
  string investedValue = 4;           // suma kosztów zakupu
  string currentValue = 5;            // suma aktualnych wartości
  string profitValue = 6;             // zysk/strata całkowity
  string profitPercentage = 7;             // zysk/strata całkowity
  repeated PortfolioItem items = 8;        // lista składników portfela
}

// ====== SERVICE ======

service PortfolioService {
  rpc StreamPortfolio(PortfolioRequest) returns (stream PortfolioResponse);
}
